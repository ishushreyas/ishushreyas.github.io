<head>
  <title>ishushreyas</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#000">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
  <link rel="stylesheet" 
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Nunito:ital,wght@1,700&family=Patrick+Hand&family=Quicksand:wght@700&display=swap">
  <style>
@import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@600&display=swap');
*{
font-family: 'Poppins';
}
body {
background-color: rgb(222,222,222);
font-size: 18px;
font-weight: 400;
}
div{
height: 45px;
width: 33px;
margin: 2px;
padding: 7px;
}
</style>
<body>
<div id='token'>Ishu Shreyas</div>
</body>
<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.9.3/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.9.3/firebase-analytics.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries
  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyBVrRabMjHB6JSWoIxpgDp6Wnn1_eryP6g",
  authDomain: "chat-9a308.firebaseapp.com",
  projectId: "chat-9a308",
  storageBucket: "chat-9a308.appspot.com",
  messagingSenderId: "425014899154",
  appId: "1:425014899154:web:be7fb6b68d239647e2180b",
  measurementId: "G-334Y4TXNJD"
  };
  import{
      getFirestore,Timestamp , doc, getDoc, getDocs, limit, orderBy, query, where, setDoc, collection, addDoc, updateDoc, deleteDoc, deleteField, onSnapshot, arrayUnion
  }from "https://www.gstatic.com/firebasejs/9.9.3/firebase-firestore.js";
  import { getAuth, signInWithPopup,signInWithEmailAndPassword, createUserWithEmailAndPassword, GoogleAuthProvider , signOut
  } from "https://www.gstatic.com/firebasejs/9.9.3/firebase-auth.js";
import { getMessaging, getToken ,onMessage} from "https://www.gstatic.com/firebasejs/9.9.3/firebase-messaging.js";
  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
const messaging = getMessaging(app);
// Add the public key generated from the console here.

  // Saves the messaging device token to Cloud Firestore.
requestNotificationsPermissions();
async function saveMessagingDeviceToken() {
    // Add the public key generated from the console here.
getToken(messaging, { vapidKey: 'BGzXdtgGEAk_2uXKUVpIbP3_XCOyFi67-jGexIezHuCc4LfJc5bYD41MYngXF9xnsIaPAl3TvLiNqZ3xrWFC_jI' }).then((currentToken) => {
  if (currentToken) {
    // Send the token to your server and update the UI if necessary
    // ...
    console.log(currentToken);
  } else {
    // Show permission request UI
    console.log('No registration token available. Request permission to generate one.');
    // ...
  }
}).catch((err) => {
  console.log('An error occurred while retrieving token. ', err);
  // ...
}); }
  onMessage(messaging, (payload) => {
  console.log('Message received. ', payload);
  // ...
});

  // Requests permissions to show notifications.
async function requestNotificationsPermissions() {
  console.log('Requesting notifications permission...');
  const permission = await Notification.requestPermission();
  if (permission === 'granted') {
    console.log('Notification permission granted.');
    // Notification permission granted.
    await saveMessagingDeviceToken();
  } else {
    console.log('Unable to get permission to notify.');
  }
}

  

document.getElementById("token").addEventListener("click", requestNotificationsPermissions);

  </script>
