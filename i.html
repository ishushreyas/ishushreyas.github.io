<body>
<button id='requestPermission'>requestPermission</button>
</body>
<script>
function requestPermission(){
if(!('serviceWorker' in navigator)){
  console.log('Service Worker not supported ');
  
  }
navigator.serviceWorker.register('/service-worker.js')
.then(function (registration) {
  console.log('Resistered successfully. Scope is: ' , registration.scope);
  });

Notification.requestPermission(status => {
console.log('Notification permission: ' , status);
});
  displayNotification();
}
function displayNotification() {
  const options = {
    body: 'jhsdkiuhdh',
    vibrate: [100],
    data: { primaryKey: 1 }
    }
if(Notification.permission === 'granted') {
navigator.serviceWorker.getRegistration().then(reg => {
reg.pushManager.subscribe({
  userVisibleOnly: true
  }).then(sub => {
  console.log(sub.toJSON());
              });
});
  }
  }
  document.getElementById('requestPermission').addEventListener('click', requestPermission);
</script>
